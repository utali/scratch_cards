<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>scratch_cards</title>
</head>
<style type="text/css">
    html,body{
        padding: 0;
        margin: 0;
    }
    #app{
        width:300px;height:100px;position: relative;border: 1px solid gray;
        display: flex;
        justify-content: space-around;
        align-items: center;
        font-size: 36px;
        background-color: #ff0000;
        color: white;
        box-sizing: border-box;
    }
    #appMark{
        width:300px;height:100px;position: absolute;left:0;top:0;z-index: 2;
        box-sizing: border-box;
    }

</style>
<body>
<div id="app">

    <canvas id="appMark"></canvas>
</div>
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script>
    //奖项数组设置
    let prizeArr = Array(25);
    let one = '一等奖';
    let two = '二等奖';
    let three = '三等奖';
    let four = '四等奖';
    let five = '五等奖';
    let six = '谢谢惠顾';
    prizeArr.fill(one, 0, 1);
    prizeArr.fill(two, 1, 3);
    prizeArr.fill(three, 3, 6);
    prizeArr.fill(four, 6, 10);
    prizeArr.fill(five, 10, 15);
    prizeArr.fill(six, 15);
    //随机生成奖项
    let prize = prizeArr[Math.floor(Math.random()*prizeArr.length-1)];
    $('#app').append(prize);

    //获取画布宽高
    let w = 400;
    let h = 200;
    let canvas = document.getElementById('appMark');
    let ctx = canvas.getContext('2d');

    //添加蒙层
    ctx.fillStyle = 'gray';
    ctx.fillRect(0,0,w,h);

    //鼠标按下事件
    let count = 0;
    canvas.onmousedown = function (e) {
        if (count < 10) {
            ctx.beginPath();
            ctx.globalCompositeOperation = 'destination-out'; //显示重合部分的原内容
            let x = e.offsetX;
            let y = e.offsetY;
            ctx.arc(x, y, 20, 0, 2*Math.PI);
            ctx.fillStyle = 'white';
            ctx.fill();
            count++;
        } else {
            //点击次数超过10次清楚蒙层
            ctx.clearRect(0,0, w, h);
        }
    }


</script>
</body>
</html>